{
    "key": "open-checking-account",
    "domain": "account",
    "version": "1.0",
    "tags": [
        "account",
        "checking"
    ],
    "attributes": {
        "timeout": {
            "duration": "PT20M",
            "target": "timeout"
        },
        "type": "flow",
        "labels": [
            {
                "label": "New Checking Account",
                "language": "en"
            },
            {
                "label": "Yeni Vadesiz Hesap",
                "language": "tr"
            }
        ],
        "functions": [
            {
                "key": "get-available-saving-currencies",
                "flow": "functions",
                "domain": "account",
                "version": "1.0"
            },
            {
                "key": "get-branch-list",
                "flow": "functions",
                "domain": "organization",
                "version": "1.0"
            }
        ],
        "sharedTransitions": [
            {
                "key": "cancel",
                "type": "cancel",
                "labels": [
                    {
                        "label": "Iptal",
                        "language": "tr"
                    },
                    {
                        "label": "Cancel",
                        "language": "en"
                    }
                ],
                "target": "cancel",
                "versionStrategy": "increaseMinor",
                "availableIn": [
                    "input-data",
                    "approval"
                ]
            }
        ],
        "startTransition": {
            "key": "start",
            "target": "input-data",
            "versionStrategy": "increaseMinor"
        },
        "states": [
            {
                "key": "input-data",
                "type": "wizard",
                "versionStrategy": "noAction",
                "labels": [
                    {
                        "label": "Vadesiz Hesap Acilisi",
                        "language": "tr"
                    },
                    {
                        "label": "Opening checking Account",
                        "language": "en"
                    }
                ],
                "transitions": [
                    {
                        "key": "submit",
                        "type": "forward",
                        "labels": [
                            {
                                "label": "Devam",
                                "language": "tr"
                            },
                            {
                                "label": "Continue",
                                "language": "en"
                            }
                        ],
                        "target": "approval",
                        "versionStrategy": "noAction",
                        "views": [
                            {
                                "key": "open-checking-account-input",
                                "flow": "views",
                                "domain": "account",
                                "version": "1.0"
                            }
                        ],
                        "onExecuteTasks": []
                    }
                ]
            },
            {
                "key": "approval",
                "versionStrategy": "noAction",
                "labels": [
                    {
                        "label": "Hesap Acilis Onayi",
                        "language": "tr"
                    },
                    {
                        "label": "Account Opening Approval",
                        "language": "en"
                    }
                ],
                "transitions": [
                    {
                        "key": "approve",
                        "type": "forward",
                        "labels": [
                            {
                                "label": "Onayla",
                                "language": "tr"
                            },
                            {
                                "label": "Approve",
                                "language": "en"
                            }
                        ],
                        "target": "completed",
                        "views": [
                            {
                                "key": "open-checking-account-approve",
                                "flow": "views",
                                "domain": "account",
                                "version": "1.0"
                            }
                        ],
                        "onExecuteTasks": [
                            {
                                "task": {
                                    "key": "checking-account-create",
                                    "flow": "tasks",
                                    "domain": "account",
                                    "version": "1.0.0"
                                },
                                "mapping": {
                                    "input": {
                                        "#route.tckn": "#instance.#data.$.attributes.customer.citizenshipNumber",
                                        "#request.#body.accountName": "#instance.#data.$.attributes.name",
                                        "#request.#body.currency": "#instance.#data.$.attributes.currency"
                                    },
                                    "output": {
                                        "#instance.#data.$.attributes.iban": "#response.#body.$.iban",
                                        "#instance.#data.$.attributes.account": "#response.#body.$.hesapno"
                                    }
                                }
                            }
                        ]
                    }
                ],
                "type": "wizard"
            },
            {
                "key": "completed",
                "versionStrategy": "noAction",
                "labels": [
                    {
                        "label": "Vadesiz Hesap",
                        "language": "tr"
                    },
                    {
                        "label": "checking Account",
                        "language": "en"
                    }
                ],
                "views": [
                    {
                        "key": "open-checking-account-completed",
                        "flow": "views",
                        "domain": "account",
                        "version": "1.0"
                    }
                ],
                "type": "finish"
            },
            {
                "key": "canceled",
                "versionStrategy": "noAction",
                "labels": [
                    {
                        "label": "Iptal",
                        "language": "tr"
                    },
                    {
                        "label": "Canceled",
                        "language": "en"
                    }
                ],
                "views": [
                    {
                        "key": "open-checking-account-canceled",
                        "flow": "views",
                        "domain": "account",
                        "version": "1.0"
                    }
                ],
                "type": "finish"
            },
            {
                "key": "timeout",
                "versionStrategy": "noAction",
                "labels": [
                    {
                        "label": "Zamanasimi",
                        "language": "tr"
                    },
                    {
                        "label": "Timeout",
                        "language": "en"
                    }
                ],
                "views": [
                    {
                        "key": "open-checking-account-timeout",
                        "flow": "views",
                        "domain": "account",
                        "version": "1.0"
                    }
                ],
                "type": "finish"
            }
        ]
    }
}